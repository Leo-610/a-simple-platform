<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大数据平台分析结果 - By Leo-610</title>
    <style>
        body {
            background-color: #f4f7f9;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Changed to flex-start for longer content */
            min-height: 100vh; /* Use min-height */
            margin: 0;
            padding: 40px 0; /* Add some padding */
        }
        .main-container {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 900px;
            width: 90%; /* Use percentage for better responsiveness */
            box-sizing: border-box;
            text-align: center;
        }
        h1 {
            font-size: 28px;
            color: #333;
            margin-bottom: 30px;
        }
        #chart-container {
            width: 100%;
            height: 450px;
        }
        /* New styles for the summary section */
        .summary-container {
            text-align: left;
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid #e9ecef;
        }
        .summary-container h2 {
            text-align: center;
            font-size: 26px;
            color: #333;
            margin-bottom: 15px;
        }
        .summary-container .summary-meta {
            text-align: center;
            color: #888;
            font-size: 14px;
            margin-bottom: 40px;
        }
        .summary-container h3 {
            font-size: 22px;
            color: #2c3e50;
            margin-top: 40px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        .summary-container h4 {
            font-size: 18px;
            color: #34495e;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        .summary-container p, .summary-container ul {
            font-size: 16px;
            line-height: 1.8;
            color: #555;
        }
        .summary-container ul {
            list-style-type: none;
            padding-left: 0;
        }
        .summary-container li {
            margin-bottom: 15px;
            position: relative;
            padding-left: 30px;
        }
        .summary-container li::before {
            content: '✓';
            position: absolute;
            left: 0;
            top: 2px;
            color: #27ae60;
            font-weight: bold;
            font-size: 18px;
        }
        .summary-container .final-summary {
            margin-top: 40px;
            padding: 20px;
            background-color: #f8f9fa;
            border-left: 5px solid #3498db;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
</head>
<body>
    <div class="main-container">
        <h1>Hadoop WordCount 任务 - 词频分析可视化</h1>
        <div id="chart-container"></div>

        <div class="summary-container">
            <h2>我的大数据平台构建之旅：学习与成长总结</h2>
            <p class="summary-meta"><strong>总结人：</strong> Leo-610 | <strong>日期：</strong> 2025年10月16日</p>

            <h3>引言：从“零”到“一”的探索</h3>
            <p>在过去的几天里，我开启了一段从零开始构建一个完整大数据平台的探索之旅。起点是三台空白的云服务器，终点则是一个功能完备、具备分布式存储、计算和协调能力的多节点集群。这不仅仅是一次按照手册操作的练习，更是一场充满挑战、需要不断排错、深度思考和动手实践的真实工程演练。这份文档旨在沉淀这次旅程中的任务成果，并系统性地梳理我所收获的核心知识与技能。</p>

            <h3>一、 我完成的核心任务（The Journey）</h3>
            <p>我的工作可以清晰地划分为四个主要阶段，环环相扣，层层递进：</p>
            
            <h4>阶段一：奠定基石 —— 基础设施的搭建与网络配置</h4>
            <ul>
                <li><strong>服务器准备：</strong>在阿里云上规划并创建了三台ECS服务器，统一了操作系统（Ubuntu 20.04）和网络环境（VPC）。</li>
                <li><strong>环境初始化：</strong>创建了专用的hadoop用户，并配置了sudo权限，实现了环境隔离。</li>
                <li><strong>网络打通：</strong>通过修改/etc/hosts文件，建立了IP地址到主机名的映射，让集群成员可以“互相认识”。</li>
                <li><strong>配置免密登录：</strong>攻克了因云服务器禁用密码登录而导致的ssh-copy-id失效难题，通过手动分发公钥并严格设置文件权限，成功实现了从主节点到所有从节点的SSH无密码访问。</li>
            </ul>

            <h4>阶段二：构建引擎 —— Hadoop核心集群的安装与配置</h4>
            <ul>
                <li><strong>安装核心依赖：</strong>在所有节点上安装了OpenJDK 1.8。</li>
                <li><strong>部署Hadoop：</strong>在主节点上下载、解压并配置了Hadoop 3.3.6，并通过软链接简化了路径。</li>
                <li><strong>精细化配置：</strong>深入core-site.xml、hdfs-site.xml、mapred-site.xml、yarn-site.xml等核心文件，定义了文件系统入口、副本数、计算框架、资源管理器等关键参数。</li>
                <li><strong>集群分发：</strong>将主节点上配置完美的Hadoop环境，通过scp命令完整地复制到所有从节点。</li>
            </ul>

            <h4>阶段三：点火启动 —— 集群的运行、验证与首个任务</h4>
            <ul>
                <li><strong>格式化文件系统：</strong>执行了关键的hdfs namenode -format命令，完成了HDFS的初始化。</li>
                <li><strong>启动与验证：</strong>执行start-all.sh启动整个集群，并通过jps命令在每个节点上验证了NameNode、DataNode、ResourceManager等核心进程的正常运行。</li>
                <li><strong>Web UI监控：</strong>通过配置安全组，成功从本地浏览器访问了HDFS（9870端口）和YARN（8088端口）的管理界面，直观地监控了集群状态。</li>
                <li><strong>运行首个MapReduce任务：</strong>成功运行了经典的WordCount示例，完整地走通了“上传数据到HDFS -> 提交计算任务到YARN -> 并行处理 -> 从HDFS获取结果”的核心流程。</li>
            </ul>

            <h4>阶段四：扩展生态 —— Zookeeper高可用协调服务的部署</h4>
            <ul>
                <li><strong>部署Zookeeper集群：</strong>在所有三个节点上安装、配置并启动了Zookeeper 3.8.5，构成了一个高可用的仲裁集群。</li>
                <li><strong>差异化配置：</strong>为每个Zookeeper节点创建了唯一的myid文件，这是其在集群中身份识别的关键。</li>
                <li><strong>集群验证：</strong>通过zkServer.sh status命令，成功验证了集群选举出了一个Leader和两个Follower，标志着分布式协调服务搭建成功。</li>
            </ul>

            <h3>二、 我收获的知识与技能（The Treasures）</h3>
            <p>这次实践最有价值的不是搭建本身，而是在解决问题过程中学到的知识。</p>

            <h4>1. 对分布式系统“全局观”的理解</h4>
            <ul>
                <li><strong>基础设施是根基：</strong>深刻体会到网络（尤其是内网互通）是分布式系统的生命线。一次VPC配置的失误，就会导致上层应用完全瘫痪。</li>
                <li><strong>主从控制模型：</strong>理解了在集群管理中，必须有一个唯一的“控制中心”（主节点）。所有管理和控制命令都应从主节点发起，而不是随意登录到某个从节点去操作。</li>
            </ul>

            <h4>2. 对Linux环境复杂性的深刻洞察</h4>
            <ul>
                <li><strong>环境变量的作用域：</strong>这是本次学习中最核心的教训之一。我两次遇到同样的问题（JAVA_HOME和zkServer.sh找不到），从而彻底理解了交互式Shell（加载.bashrc）和非交互式Shell（不加载.bashrc）的巨大差异。这对于编写任何自动化或远程执行脚本都至关重要。</li>
                <li><strong>文件权限的严肃性：</strong>在配置SSH免密登录时，认识到Linux对.ssh目录和authorized_keys文件的权限要求是极其严格的（700/600），任何不当的权限设置都会导致认证失败。</li>
                <li><strong>软链接的妙用：</strong>通过为Hadoop和Zookeeper创建软链接，使得后续的配置和脚本编写可以不依赖于具体的版本号，极大地增强了系统的可维护性和升级的便利性。</li>
            </ul>

            <h4>3. 对大数据核心组件协同工作的理解</h4>
            <ul>
                <li><strong>HDFS + YARN：</strong>不再是两个孤立的概念。我亲眼看到MapReduce任务如何通过YARN被调度，YARN的NodeManager如何启动容器，容器又如何去HDFS上读取数据块。</li>
                <li><strong>Zookeeper的角色：</strong>明白了Zookeeper不是一个业务系统，而是一个“服务于服务”的系统。它是HBase、Kafka等其他分布式组件选举主节点、存储元数据、管理集群状态的“定海神针”。</li>
            </ul>

            <h4>4. 解决问题的“工程师思维”</h4>
            <ul>
                <li><strong>从日志出发：</strong>学会了不再惧怕满屏的错误信息，而是静下心来，从Permission denied、404 Not Found、command not found这些关键日志中寻找线索。</li>
                <li><strong>假设与验证：</strong>在排查下载链接失败的问题时，我实践了“提出假设 -> 设计实验验证 -> 分析结果 -> 修正假设”的科学排错流程。</li>
                <li><strong>化繁为简：</strong>当遇到复杂问题时（如SSH免密），学会了回归最基本、最底层的原理（手动复制密钥），绕过封装好的工具（ssh-copy-id）的“黑盒”，从而解决问题并理解本质。</li>
            </ul>

            <h3 class="final-summary">总结</h3>
            <p>这次旅程，我不仅收获了一个亲手搭建的大数据平台，更收获了一套解决复杂系统问题的思维方法。从网络、权限到环境变量，再到上层组件的协同，我对一个分布式系统如何“呼吸”和“思考”有了具象化的认知。这些从实践中踩过的“坑”和解决的“谜题”，是我未来技术道路上最宝贵的财富。</p>
        </div>
    </div>

    <script src="data.js"></script>
    <script>
        /*
        Inside this script tag:
        1. Add a script tag to import the data from `data.js`. (Already done above)
        2. Initialize an ECharts instance on the div with the id "chart-container".
        3. Define the chart option for a pie chart.
           - The main title should be "核心配置文件词频 Top 10".
           - The subtitle should be "数据来源: MapReduce on Hadoop Cluster".
           - The chart type should be 'pie'.
           - The data for the series should come from the `wordCountData` constant (from data.js).
           - Enable tooltips and a legend.
        4. Finally, set the option to the ECharts instance to render the chart.
        */

        // Initialize ECharts instance
        var myChart = echarts.init(document.getElementById('chart-container'));

        // Define chart option
        var option = {
            title: {
                text: '核心配置文件词频 Top 10',
                subtext: '数据来源: MapReduce on Hadoop Cluster',
                left: 'center'
            },
            tooltip: {
                trigger: 'item'
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                top: 'middle'
            },
            series: [
                {
                    name: '词频',
                    type: 'pie',
                    radius: '70%',
                    data: wordCountData,
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        // Set the option to the ECharts instance
        myChart.setOption(option);
    </script>
</body>
</html>
